<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <title>Config App</title>
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="{{ url_for('static', path='bootstrap/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', path='styles/index.css') }}">
        <script src="{{ url_for('static', path='/js/index.js') }}"></script>
        <script src="{{ url_for('static', path='/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
        

    </head>

    <body>
        
        <div class="header">
            <div class="navbar navbar-dark bg-dark">
                <div class="container-fluid" style="display: flex; align-items: center; justify-content: center" >
                    <span>
                        <a class="btn btn-primary" href="{{ url_for('to_configurator') }}"> CONFIGURATOR NODE </a> /
                        <button class="btn btn-primary">
                            ARCHIEVE
                        </button>
                    </span>
                </div>
            </div>
        </div>


        <div class="container" style="margin-top: 50px;">
            <div id="cont-butts">
                <button id="prev" class="btn btn-primary" style="width: 40px; height:40px; border-radius:10px; color:white;">
                    <img src = "static/images/prev.png" style="width: 20px; height:20px; position:relative; right: 3px; bottom:2px">
                </button>

                <button id="next" class="btn btn-primary" style="width: 40px; height:40px; border-radius:10px; color:white;">
                    <img src = "static/images/next.png" style="width: 20px; height:20px; position:relative; right: 3px; bottom:2px">
                </button>
            </div>
            
        </div>

        <p>{{id}}</p>
        <div class="container" style="margin-top: 50px; width:50%">
            <table class="table">
                <thead style="border-style:none">
                    <tr style="border: 0;">
                      <th style="font-size: 32px; color:#3c89fd; text-align: center" scope="col">ID</th>
                      <th style="font-size: 32px; color:#3c89fd; text-align: center" scope="col">RECEIVED FROM</th>
                    </tr>
                </thead>
                <tbody id="records">

                </tbody>
                
            </table>
            
        </div>

        <script>
            var offset = 0;
            var limit = 0;
            function loadrecs(offset) {
                $.ajax({
                    url: '/api/get_recs?offset=' + offset,
                    type: 'GET',
                    success: function(data) {
                        // Очистка текущих записей
                        $('#records').empty();
                        // Отображение полученных записей на странице
                        data.forEach(function(record) {
                            
                            $('#records').append('<tr style="border-style:0;"> <th> <p class="card bg-dark" style="font-size: 20px; color:#3c89fd; text-align: center">' + record[0] + '</p></th>' + '<th><p class="card bg-dark" style="font-size: 20px; color:#3c89fd; text-align: center">' + record[2] + '</p></th><tr>');
                        });
                       
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
            };

            $(document).ready(function() {
                loadrecs(offset);
            });

            $('#next').click(function() {
                offset += 10;

                loadrecs(offset);
            });
            $('#prev').click(function() {
                offset -= 10;

                loadrecs(offset);
            });
        </script>
        
    </body>
</html>
